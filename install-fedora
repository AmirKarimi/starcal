#!/bin/bash
## yum install @development-tools
## yum install rpm-build rpmdevtools rpmlint mock


if [ "$UID" != "0" ] ; then
  echo "Run this script as root"
  exit 1
fi


myPath="$0"
if [ "${myPath:0:2}" == "./" ] ; then
    myPath=$PWD${myPath:1}
elif [ "${myPath:0:1}" != "/" ] ; then
    myPath=$PWD/$myPath
fi


pkgName=starcal2
sourceDir="`dirname \"$myPath\"`"
version=`\$sourceDir/scal2/get_version.py`

#echo "myPath=$myPath"
#echo "sourceDir=$sourceDir"
#echo version=$version

tmpDir=/tmp/starcal2-install-deb
mkdir -p $tmpDir
cd $tmpDir




echo "Name: $pkgName
Version: $version
Release: 3
Summary: A full-featured international calendar writen in Python
License: GPLv3+
URL: http://starcal.sourceforge.net/
%description:
StarCalendar is a full-featured international calendar writen in Python,
with both PyGTK and PyQt interfaces, that supports Jalai(Iranian),
Hijri(Islamic), and Indian National calendars, as well as common 
english(Gregorian) calendar

%changelog
" > "$tmpDir/$pkgName.spec"

rpmbuild -ba "$tmpDir/$pkgName.spec"





"$sourceDir/install" "$tmpDir" "--for-pkg"
chown -R root "$tmpDir"







